(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[4],{40:function(e,t,n){"use strict";var c=n(51),o=n(46),s=n(41),r=n(0),a=n(50).a.create({baseURL:"http://localhost:4000/",timeout:1e3});t.a=function(e){var t=Object(r.useState)(),n=Object(s.a)(t,2),i=n[0],u=n[1],j=Object(r.useState)(null),m=Object(s.a)(j,2),d=m[0],l=m[1],b=Object(r.useState)(!1),O=Object(s.a)(b,2),h=O[0],x=O[1],f=Object(r.useCallback)(function(){var e=Object(o.a)(Object(c.a)().mark((function e(t){var n,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,a(t);case 4:return n=e.sent,o=n.data,u(o),e.abrupt("return",o);case 10:e.prev=10,e.t0=e.catch(1),l("something went wrong");case 13:return e.prev=13,x(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){f(e)}),[e,f]),{data:i,error:d,isLoading:h,request:f}}},48:function(e,t,n){"use strict";var c=n(8),o=n(49),s=n.n(o),r=n(1);t.a=function(){return Object(r.jsxs)("div",{className:s.a.noquotes,children:[Object(r.jsx)("p",{children:"No quotes found!"}),Object(r.jsx)(c.b,{to:"/new-quote",className:"btn",children:"Add a Quote"})]})}},49:function(e,t,n){e.exports={noquotes:"NoQuotesFound_noquotes__1LoaB"}},69:function(e,t,n){e.exports={quote:"HighlightedQuote_quote__2Bvmd"}},70:function(e,t,n){e.exports={form:"NewCommentForm_form__8I_NN",loading:"NewCommentForm_loading__1YJAw",control:"NewCommentForm_control__3ey4-",actions:"NewCommentForm_actions__12I1V"}},71:function(e,t,n){e.exports={item:"CommentItem_item__3o3yO"}},72:function(e,t,n){e.exports={comments:"Comments_comments__AVsPs"}},76:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(2),s=n(8),r=n(69),a=n.n(r),i=n(1),u=function(e){return Object(i.jsxs)("figure",{className:a.a.quote,children:[Object(i.jsx)("p",{children:e.text}),Object(i.jsx)("figcaption",{children:e.author})]})},j=n(14),m=n(48),d=n(41),l=n(40),b=n(70),O=n.n(b),h=function(e){var t=e.quoteId,n=e.onAddComment,o=Object(c.useRef)(),s=Object(l.a)(),r=s.isLoading,a=s.request,u=function(e){e.preventDefault();var c=o.current.value;0!==c.trim().length&&a({url:"comments",method:"post",data:{quoteId:t,text:c}}).then((function(){o.current.value="",n()}))};return Object(i.jsxs)("form",{className:O.a.form,onSubmit:u,children:[r&&Object(i.jsx)("div",{className:"centered",children:Object(i.jsx)(j.a,{})}),Object(i.jsxs)("div",{className:O.a.control,onSubmit:u,children:[Object(i.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),Object(i.jsx)("textarea",{id:"comment",rows:"5",ref:o})]}),Object(i.jsx)("div",{className:O.a.actions,children:Object(i.jsx)("button",{className:"btn",children:"Add Comment"})})]})},x=n(71),f=n.n(x),p=function(e){return Object(i.jsx)("li",{className:f.a.item,children:Object(i.jsx)("p",{children:e.text})})},v=n(72),N=n.n(v),_=function(e){var t,n=e.quoteId,o=Object(c.useState)(!1),s=Object(d.a)(o,2),r=s[0],a=s[1],u=Object(l.a)("comments?quoteId=".concat(n)),m=u.error,b=u.isLoading,O=u.data,x=u.request;return b&&(t=Object(i.jsx)("div",{className:"centered",children:Object(i.jsx)(j.a,{})})),m&&(t=Object(i.jsx)("div",{className:"centered",children:Object(i.jsx)("p",{children:m||"something went wrong\ud83d\udca5\ud83d\udca5\ud83d\udca5"})})),b||0!==(null===O||void 0===O?void 0:O.length)||(t=Object(i.jsx)("div",{className:"centered",children:Object(i.jsx)("p",{children:"No comments at the moment"})})),!b&&(null===O||void 0===O?void 0:O.length)>0&&(t=null===O||void 0===O?void 0:O.map((function(e){return Object(i.jsx)(p,{text:e.text},e.id)}))),Object(i.jsxs)("section",{className:N.a.comments,children:[Object(i.jsx)("h2",{children:"User Comments"}),!r&&Object(i.jsx)("button",{className:"btn",onClick:function(){a(!0)},children:"Add a Comment"}),r&&Object(i.jsx)(h,{quoteId:n,onAddComment:function(){x("comments?quoteId=".concat(n)).finally((function(){return a(!1)}))}}),t]})};t.default=function(){var e=Object(o.k)(),t=Object(o.j)().quoteId,n=Object(l.a)("quotes/".concat(t)),r=n.isLoading,a=n.error,d=n.data;return r?Object(i.jsx)(j.a,{}):a?Object(i.jsx)("p",{className:"centered focused",children:a||"something went wrong\ud83d\udca5\ud83d\udca5\ud83d\udca5"}):d?Object(i.jsxs)(c.Fragment,{children:[Object(i.jsx)(u,{author:d.author,text:d.text}),Object(i.jsx)(o.c,{path:"".concat(e.path),exact:!0,children:Object(i.jsx)("div",{className:"centered",children:Object(i.jsx)(s.b,{className:"btn--flat",to:"".concat(e.url,"/comments"),children:"Load Comments"})})}),Object(i.jsx)(o.c,{path:"".concat(e.url,"/comments"),children:Object(i.jsx)(_,{quoteId:t})})]}):Object(i.jsx)(m.a,{})}}}]);
//# sourceMappingURL=4.9973b73a.chunk.js.map